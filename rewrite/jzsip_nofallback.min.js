!function(){"use strict";var t="scripts.js",e="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,r=navigator.userAgent.match(/MSIE [0-9]{1,2}/i),a=r?+r[0].substr(5):1/0,n=25e3;if(e||(window.JzSip=function(e,r){var a=new Worker(t),n=0,i=function(t,e,r){n++,a.postMessage([t,n].concat(e)),a.addEventListener("message",function i(t){t.data[0]===n&&(r(t.data[1]),a.removeEventListener("message",i))})};i("loadZip",[e],function(){r({getFile:function(t,e,r){i("getFile",[t,r||"utf8"],e)},getEntry:function(t,e){i("getEntry",[t],function(t){e(JSON.parse(t))})},isWorker:!0})})}),!e)return t=document.currentScript?document.currentScript.src:t||function(){var t=document.getElementsByTagName("script"),e=t[t.length-1];return e.getAttribute("src",2)}();var i;onmessage=function(t){if(t.data.constructor!==Array)throw"Worker onmessage: Data not Array";var e=t.data[0],r=t.data[1],a=t.data.slice(2);switch(e){case"loadZip":s(a[0],function(t){i=t,postMessage([r])});break;case"getFile":postMessage([r,i.getFile(a[0],a[1])]);break;case"getEntry":postMessage([r,i.getEntry(a[0])])}};function s(t,e){var r=new XMLHttpRequest;r.open("GET",t,!0),r.addEventListener("load",function(){var t=a>10?new Uint8Array(r.response):new VBArray(r.responseBody).toArray();e(new l(t))},!1),r.overrideMimeType?r.responseType="arraybuffer":r.setRequestHeader("Accept-Charset","x-user-defined"),r.send(null)}function o(t,e,r){return r="undefined"===r?t.length:e+r,a>10?t.subarray(e,r):t.slice(e,r)}function d(t,e,r){r=r||0,t=o(t,r,e);for(var a="",i=0,s=Math.ceil(t.length/n);s>i;i++)a+=String.fromCharCode.apply(null,o(t,i*n,s>i?n:t.length%n));return a}function c(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}function u(t,e){return t[e+1]<<8|t[e]}function f(t){this.name=t}f.prototype={read_raw:function(){if(this.data)return this.data;var t=o(this.zip.data,this.dataStart,this.compressedSize);switch(this.method){case 0:return this.data=t,t;case 8:throw"ZipEntry#read_raw: Invalid compression method"}},read_utf8:function(){if(this.dataUTF8)return this.dataUTF8;var t=this.read_raw();return this.dataUTF8=d(t,t.length)},read_base64:function(){if(this.dataBase64)return this.dataBase64;var t=btoa(this.read_utf8());return this.dataBase64=t}};function l(t){this.data=t,this.entryTable={};for(var e,r=t.length-21,a=Math.max(0,r-65535);r-->=a;)101010256===c(t,r)&&(e=r);if(!e)throw"Parsing header: File ended abrubtly, invalid zip";for(var n=o(t,e,22),i=u(n,10),s=c(n,16),r=0;i>r;r++){var l=o(t,s,46);if(s+=46,33639248!==c(l,0))throw"Reading entries: Bad CEN signature";var h=u(l,28);if(0===h)throw"Read entries: Entry missing name";var p=new f(d(t,h,s));if(s+=h,p.isDirectory="/"===p.name.charAt(p.name.length-1)?!0:!1,h=u(l,30),h>0&&(p.extra=d(t,h,s)),s+=h,h=u(l,32),p.comment=d(t,h,s),s+=h,p.version=u(l,6),p.flag=u(l,8),1===(1&p.flag))throw"read entries: Encrypted ZIP entry not supported";p.method=u(l,10),p.dostime=c(l,12),p.crc=c(l,16),p.compressedSize=c(l,20),p.size=c(l,24),p.locOffset=c(l,42),p.zip=this,p.data=null,p.dataUTF8=null,p.dataBase64=null,p.dataStart=p.locOffset+30+p.name.length+(this.data[p.locOffset+29]<<8|this.data[p.locOffset+28]),this.entryTable[p.name]=p}}var h=["zip","data","dataUTF8","dataBase64"],p=function(t,e){return h.indexOf(t)>-1?void 0:e};l.prototype={getFile:function(t,e){return e=e.replace(/\W/g,"").toLowerCase(),this.entryTable[t]["read_"+e]()},getEntry:function(t){return JSON.stringify(this.entryTable[t],p,null)},getEntries:function(){var t=[];for(var e in this.entryTable)t.push(this.entryTable[e]);return t}}}();;
