<!DOCTYPE html>

<html>
   <head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>JzSip test</title>
		<style>
			h1			{ font-variant: small-caps }
		</style>
   </head>

   <body>
		<img id="logo" title="This image was loaded from test.zip!">
		<h1>JzSip</h2>
		<p>
			A small (5KB!) library for reading files from ZIP archives - compression supported! <br>
			<span class="smallcaps">JzSip</span> is licensed under the <a href="https://github.com/frash23/jzsip/blob/master/LICENSE">MIT License</a>. I'm not very strict when it comes to this, if you think another license is more suitable, please do <a href="https://github.com/frash23/jzsip/issues/new">open an issue</a> on the GitHub issue tracker! <br>
			<br>
			Below is my satirical NULL license. <a id="licenseLink" href="javascript:void(0)">Click here to swap it out with GPLv3</a> (read from test.zip!).
		</p>

		<p>
			If the blinker below is halted, the main thread is saturated <br>
			<span id="test"></span>
		</p>

		<h2 id="licenseTitle">NULL - No Use License, Literally</h2>
		<code id="licenseText">Loading...</code>

		<audio controls></audio> <br>
		<a id="loadAudio" href="javascript:void(0)">Load TheFatRat - Unity into the player above</a>

      <script src="../jzsip.js"></script>
      <script>
			function $(sel) { return Array.prototype.slice.call( document.querySelectorAll(sel) ); }

			new JzSip('test.zip', function(zip) {
				window.zip = zip;
				zip.getFile('test.txt', alert);
				zip.getFile('Images/jzsip.png', function(imgData) { $('#logo')[0].src = 'data:image/png;base64,'+ imgData; }, 'base64');
				zip.getFile('Licenses/NULL', function(text) { $('#licenseText')[0].innerHTML = text.replace(/\n/g, '<br>\n'); });

				setInterval(function(){
					var elem = $('#test')[0];
					elem.textContent = elem.textContent === '█'? '_' : '█';
				}, 150);

				$('#loadAudio')[0].addEventListener('click', function(e) {
					zip.getFile('Audio/TheFatRat - Unity.mp3', function(audioData) {
						$('audio')[0].src = 'data:audio/mp3;base64,'+ audioData;
					}, 'base64');
				});

				$('#licenseLink')[0].addEventListener('click', function(e) {
					$('#licenseTitle')[0].textContent = 'GPLv3 - General Public License v3';
					zip.getFile('Licenses/GPLv3', function(textData) { $('#licenseText')[0].innerHTML = textData.replace(/\n/g, '<br>\n'); });
					return false;
				});
			});
      </script>
   </body>
</html>
