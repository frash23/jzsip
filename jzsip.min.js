/**@preserve
 * @fileoverview [JzSip](https://github.com/frash23/jzsip) Pure JS zip decoder
 * @author Jacob Pedersen <jacob@bytesizedpacket.com> (https://jacobpedersen.me)
 * @license Licensed MIT */
!function(){"use strict";function e(e,t){var r=new XMLHttpRequest;r.open("GET",e,!0),r.onreadystatechange=function(){if(4===r.readyState&&200===r.status){var e=f>10?new Uint8Array(r.response):new VBArray(r.responseBody).toArray();t(new o(e))}},r.overrideMimeType?r.responseType="arraybuffer":r.setRequestHeader("Accept-Charset","x-user-defined"),r.send(null)}function t(e,t,r){return r="undefined"===r?e.length:t+r,f>10?e.subarray(t,r):e.slice(t,r)}function r(e,r,a){a=a||0,e=t(e,a,r);for(var n="",i=0,s=Math.ceil(e.length/h);s>i;i++)n+=String.fromCharCode.apply(null,t(e,i*h,s>i?h:e.length%h));return n}function a(e){for(var t,r=e.length,a="",n=0,i=r-r%3;i>n;n++)t=(e[n]<<16)+(e[++n]<<8)+e[++n],a+=v[t>>18&63]+v[t>>12&63]+v[t>>6&63]+v[63&t];return r%3===1?(t=e[e.length-1],a+=v[t>>2]+v[t<<4&63]+"=="):(t=(e[e.length-2]<<8)+e[e.length-1],a+=v[t>>10]+v[t>>4&63]+v[t<<2&63]+"="),a}function n(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function i(e,t){return e[t+1]<<8|e[t]}function s(e){this.name=e}function o(e){this.data=e,this.entryTable={};for(var a,o=e.length-21,c=Math.max(0,o-65535);o-->=c;)101010256===n(e,o)&&(a=o);if(!a)throw"Parsing header: File ended abrubtly, invalid zip";for(var u=t(e,a,22),d=i(u,10),f=n(u,16),o=0;d>o;o++){var l=t(e,f,46);if(f+=46,33639248!==n(l,0))throw"Reading entries: Bad CEN signature";var h=i(l,28);if(0===h)throw"Read entries: Entry missing name";var g=new s(r(e,h,f));if(f+=h,g.isDirectory="/"===g.name.charAt(g.name.length-1)?!0:!1,h=i(l,30),h>0&&(g.extra=r(e,h,f)),f+=h,h=i(l,32),g.comment=r(e,h,f),f+=h,g.version=i(l,6),g.flag=i(l,8),1===(1&g.flag))throw"read entries: Encrypted ZIP entry not supported";g.method=i(l,10),g.dostime=n(l,12),g.crc=n(l,16),g.compressedSize=n(l,20),g.size=n(l,24),g.locOffset=n(l,42),g.zip=this,g.data=null,g.dataUTF8=null,g.dataBase64=null,g.dataStart=g.locOffset+30+g.name.length+(this.data[g.locOffset+29]<<8|this.data[g.locOffset+28]),this.entryTable[g.name]=g}}var c="",u=!0,d=navigator.userAgent.match(/MSIE [0-9]{1,2}/i),f=d?+d[0].substr(5):1/0,l="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,h=25e3,g="JzSip";if(l||(window[g]=function(t,r){var a=document.createElement("a");if(a.href=t,t=a.href,f>9){var n=new Worker(c),i=0,s=function(e,t,r){var a=i++;n.postMessage([e,a].concat(t)),n.addEventListener("message",function s(e){e.data[0]===a&&(r(e.data[1]),n.removeEventListener("message",s))})};s("loadZip",[t],function(){r({getFile:function(e,t,r){s("getFile",[e,r||"utf8"],t)},getEntry:function(e,t){s("getEntry",[e],function(e){t(JSON.parse(e))})},isWorker:!0})})}else e(t,function(e){r({getFile:function(t,r,a){r(e.getFile(t,a||"utf8"))},getEntry:function(t,r){r(JSON.parse(e.getEntry(t)))},isWorker:!1})})}),!l&&f>9){if(document.currentScript)c=document.currentScript.src;else if(u){var p=document.getElementsByTagName("script"),y=p[p.length-1];c=y.getAttribute("src",2)}else if(!c)throw"Unable to get JzSip source script"}else{if(l&&f>9){var m;onmessage=function(t){if(t.data.constructor!==Array)throw"Worker onmessage: Data not Array";var r=t.data[0],a=t.data[1],n=t.data.slice(2);switch(r){case"loadZip":e(n[0],function(e){m=e,postMessage([a])});break;case"getFile":postMessage([a,m.getFile(n[0],n[1])]);break;case"getEntry":postMessage([a,m.getEntry(n[0])])}}}var v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");s.prototype={read_raw:function(){if(this.data)return this.data;var e=t(this.zip.data,this.dataStart,this.compressedSize);switch(this.method){case 0:return this.data=e,e;case 8:throw"ZipEntry#read_raw: Invalid compression method"}},read_utf8:function(){if(this.dataUTF8)return this.dataUTF8;var e=this.read_raw();return this.dataUTF8=r(e,e.length)},read_base64:function(){if(this.dataBase64)return this.dataBase64;var e=9>=f?a(this.read_raw()):btoa(this.read_utf8());return this.dataBase64=e}};var w=["zip","data","dataUTF8","dataBase64"],b=function(e,t){return w.indexOf(e)>-1?void 0:t};o.prototype={getFile:function(e,t){return t=t.replace(/\W/g,"").toLowerCase(),this.entryTable[e]["read_"+t]()},getEntry:function(e){return JSON.stringify(this.entryTable[e],b,null)},getEntries:function(){var e=[];for(var t in this.entryTable)e.push(this.entryTable[t]);return e}}}}();